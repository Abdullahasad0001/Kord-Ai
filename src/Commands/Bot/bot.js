const a0_0x1a7d71=a0_0x2795;(function(_0x11458d,_0xe8350c){const _0x4a01b6=a0_0x2795,_0x2dd1b6=_0x11458d();while(!![]){try{const _0x792c8e=parseInt(_0x4a01b6(0x174))/0x1*(-parseInt(_0x4a01b6(0x1a0))/0x2)+-parseInt(_0x4a01b6(0x195))/0x3+parseInt(_0x4a01b6(0x167))/0x4+parseInt(_0x4a01b6(0x197))/0x5+parseInt(_0x4a01b6(0x18d))/0x6+-parseInt(_0x4a01b6(0x17c))/0x7*(parseInt(_0x4a01b6(0x198))/0x8)+-parseInt(_0x4a01b6(0x17d))/0x9*(-parseInt(_0x4a01b6(0x1ab))/0xa);if(_0x792c8e===_0xe8350c)break;else _0x2dd1b6['push'](_0x2dd1b6['shift']());}catch(_0x5c13d2){_0x2dd1b6['push'](_0x2dd1b6['shift']());}}}(a0_0x1f0c,0x8b9a2));const a0_0x4e9cb0=a0_0x477f;(function(_0xf8c66b,_0x4a57b2){const _0x382746=a0_0x2795,_0x52c890=a0_0x477f,_0x10d197=_0xf8c66b();while(!![]){try{const _0x10192a=-parseInt(_0x52c890(0x19d))/0x1*(-parseInt(_0x52c890(0x17c))/0x2)+-parseInt(_0x52c890(0x199))/0x3*(parseInt(_0x52c890(0x16d))/0x4)+parseInt(_0x52c890(0x176))/0x5*(-parseInt(_0x52c890(0x173))/0x6)+-parseInt(_0x52c890(0x19a))/0x7*(-parseInt(_0x52c890(0x197))/0x8)+-parseInt(_0x52c890(0x175))/0x9+parseInt(_0x52c890(0x186))/0xa*(parseInt(_0x52c890(0x161))/0xb)+parseInt(_0x52c890(0x177))/0xc;if(_0x10192a===_0x4a57b2)break;else _0x10d197['push'](_0x10d197['shift']());}catch(_0x38151f){_0x10d197['push'](_0x10d197[_0x382746(0x1ac)]());}}}(a0_0x2bd6,0x3c0fd));function a0_0x2795(_0x56caea,_0x1d4c99){const _0x1f0c02=a0_0x1f0c();return a0_0x2795=function(_0x279517,_0x3c2342){_0x279517=_0x279517-0x166;let _0x3b17c3=_0x1f0c02[_0x279517];return _0x3b17c3;},a0_0x2795(_0x56caea,_0x1d4c99);}const fs=require('fs')[a0_0x4e9cb0(0x166)],path=require(a0_0x4e9cb0(0x18f)),{Mistral}=require(a0_0x4e9cb0(0x160)),emojis={'loading':'⏳','success':'✨','error':'❌'},configPath=path[a0_0x4e9cb0(0x181)](__dirname,'..','..',a0_0x4e9cb0(0x192),a0_0x4e9cb0(0x17f));let messageListener=null,activeChats=new Set(),chatHistory=new Map();const mistralClient=new Mistral({'apiKey':a0_0x1a7d71(0x17f)}),AGENT_CONFIG={'agentId':a0_0x1a7d71(0x192)};function sanitizeMessage(_0x1b4467){const _0x56e30a=a0_0x4e9cb0;if(typeof _0x1b4467!==_0x56e30a(0x16e))return'';return _0x1b4467[_0x56e30a(0x193)]();}async function getAIResponse(_0x5a51e8,_0x2ec611){const _0x16e7e6=a0_0x1a7d71,_0x4213eb=a0_0x4e9cb0,_0xe580a8=sanitizeMessage(_0x5a51e8);if(!_0xe580a8)throw new Error(_0x4213eb(0x18d));try{!chatHistory[_0x4213eb(0x169)](_0x2ec611)&&chatHistory[_0x4213eb(0x18a)](_0x2ec611,[]);const _0x317468=chatHistory[_0x4213eb(0x17d)](_0x2ec611);_0x317468[_0x16e7e6(0x178)]({'role':_0x16e7e6(0x185),'content':String(_0xe580a8)});while(_0x317468[_0x4213eb(0x163)]>0xa){_0x317468['shift']();}const _0x5d0e52=await mistralClient[_0x4213eb(0x194)][_0x4213eb(0x198)]({'agentId':AGENT_CONFIG[_0x4213eb(0x183)],'messages':_0x317468});if(!_0x5d0e52?.[_0x4213eb(0x172)]?.[0x0]?.[_0x16e7e6(0x18a)]?.[_0x16e7e6(0x1a8)])throw new Error(_0x16e7e6(0x1ad));return _0x317468[_0x4213eb(0x188)]({'role':_0x4213eb(0x16a),'content':_0x5d0e52[_0x16e7e6(0x1a5)][0x0][_0x4213eb(0x16b)][_0x4213eb(0x164)]}),_0x5d0e52[_0x4213eb(0x172)][0x0][_0x16e7e6(0x18a)]['content'];}catch(_0x59d909){console[_0x4213eb(0x190)](_0x4213eb(0x18c),_0x59d909),chatHistory[_0x4213eb(0x19c)](_0x2ec611);throw new Error(_0x4213eb(0x182)+_0x59d909[_0x4213eb(0x16b)]);}}module[a0_0x1a7d71(0x16e)]={'usage':[a0_0x4e9cb0(0x174)],'desc':a0_0x1a7d71(0x19d),'commandType':a0_0x4e9cb0(0x15e),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'emoji':'✨',async 'execute'(_0x2eb48f,_0x22344b,_0x2e6006){const _0x153049=a0_0x1a7d71,_0x43e986=a0_0x4e9cb0,_0x431399=_0x22344b[_0x43e986(0x19b)][_0x43e986(0x18e)],_0x1d8ec1=_0x36eeef=>{const _0x59ec46=_0x43e986;return _0x2eb48f[_0x59ec46(0x189)](_0x431399,{'text':_0x36eeef});};if(_0x2e6006[0x0]==='on'){if(activeChats[_0x153049(0x1a1)](_0x431399))return _0x1d8ec1(_0x43e986(0x15a));return activeChats[_0x43e986(0x170)](_0x431399),chatHistory[_0x43e986(0x18a)](_0x431399,[]),await this[_0x153049(0x18c)](_0x431399,!![]),!messageListener&&this[_0x43e986(0x15c)](_0x2eb48f),_0x1d8ec1(_0x43e986(0x15f));}else{if(_0x2e6006[0x0]===_0x153049(0x1a7)){if(!activeChats[_0x43e986(0x169)](_0x431399))return _0x1d8ec1(_0x43e986(0x179));return activeChats[_0x153049(0x19a)](_0x431399),chatHistory['delete'](_0x431399),await this[_0x43e986(0x195)](_0x431399,![]),activeChats[_0x43e986(0x196)]===0x0&&messageListener&&(_0x2eb48f['ev'][_0x43e986(0x185)](_0x43e986(0x191),messageListener),messageListener=null),_0x1d8ec1(_0x43e986(0x17e));}else return _0x1d8ec1(_0x153049(0x16d));}},async 'updateConfig'(_0x1698b3,_0x2c1466){const _0x2fc79d=a0_0x1a7d71,_0x506207=a0_0x4e9cb0;try{let _0x20e03b={};_0x2c1466&&(_0x20e03b[_0x1698b3]=!![]),await fs[_0x506207(0x15d)](configPath,JSON[_0x506207(0x167)](_0x20e03b,null,0x2));}catch(_0x2379c2){console[_0x506207(0x190)](_0x2fc79d(0x16f),_0x2379c2);throw new Error(_0x2fc79d(0x173));}},'startListening'(_0x264325){const _0x433a26=a0_0x1a7d71;messageListener=async({messages:_0x3b16f4})=>{const _0x1e9813=a0_0x2795,_0x3ac579=a0_0x477f;for(const _0x4cdc2a of _0x3b16f4){if(!_0x4cdc2a?.[_0x3ac579(0x19b)]?.[_0x3ac579(0x18e)]||!activeChats[_0x3ac579(0x169)](_0x4cdc2a[_0x3ac579(0x19b)][_0x3ac579(0x18e)]))continue;const _0x37da06=_0x4cdc2a[_0x3ac579(0x19b)][_0x3ac579(0x18e)],_0x1e0c2e=_0x4cdc2a[_0x1e9813(0x18a)]?.[_0x3ac579(0x180)]||_0x4cdc2a[_0x3ac579(0x16b)]?.[_0x3ac579(0x15b)]?.[_0x3ac579(0x171)]||'';if(!_0x1e0c2e||_0x4cdc2a[_0x3ac579(0x19b)][_0x3ac579(0x18b)])continue;try{await _0x264325[_0x3ac579(0x184)](_0x3ac579(0x16c),_0x37da06),await _0x264325[_0x3ac579(0x189)](_0x37da06,{'react':{'key':_0x4cdc2a[_0x1e9813(0x1a9)],'emoji':emojis[_0x3ac579(0x17b)]}});const _0x1c4505=await getAIResponse(_0x1e0c2e,_0x37da06);await _0x264325[_0x3ac579(0x189)](_0x37da06,{'react':{'key':_0x4cdc2a[_0x3ac579(0x19b)],'emoji':emojis[_0x3ac579(0x16f)]}}),await _0x264325[_0x3ac579(0x189)](_0x37da06,{'text':_0x1c4505,'contextInfo':{'quotedMessage':_0x4cdc2a[_0x3ac579(0x16b)]}});}catch(_0x30e52e){console[_0x3ac579(0x190)](_0x3ac579(0x168),_0x30e52e),await _0x264325[_0x3ac579(0x189)](_0x37da06,{'react':{'key':_0x4cdc2a[_0x3ac579(0x19b)],'emoji':emojis[_0x3ac579(0x190)]}}),await _0x264325[_0x3ac579(0x189)](_0x37da06,{'text':_0x3ac579(0x17a)+_0x30e52e[_0x3ac579(0x16b)]});}finally{await _0x264325[_0x1e9813(0x199)](_0x3ac579(0x165),_0x37da06);}}},_0x264325['ev']['on'](_0x433a26(0x196),messageListener);},async 'init'(_0x44abcf){const _0x2c0dc0=a0_0x4e9cb0;try{await fs[_0x2c0dc0(0x15d)](configPath,'{}',_0x2c0dc0(0x178)),activeChats[_0x2c0dc0(0x162)](),chatHistory[_0x2c0dc0(0x162)](),messageListener&&(_0x44abcf['ev'][_0x2c0dc0(0x185)]('messages.upsert',messageListener),messageListener=null);}catch(_0x5cbef1){console[_0x2c0dc0(0x190)](_0x2c0dc0(0x187),_0x5cbef1);}}};function a0_0x477f(_0x7b9158,_0x46e95c){const _0x37061b=a0_0x2bd6();return a0_0x477f=function(_0x1880fc,_0x5a2c50){_0x1880fc=_0x1880fc-0x15a;let _0x36de37=_0x37061b[_0x1880fc];return _0x36de37;},a0_0x477f(_0x7b9158,_0x46e95c);}function a0_0x2bd6(){const _0x545f06=a0_0x1a7d71,_0x56fd05=[_0x545f06(0x1aa),_0x545f06(0x1a3),_0x545f06(0x199),_0x545f06(0x1a7),'315480yVAOAr','Error\x20initializing\x20chatbot:','push',_0x545f06(0x180),_0x545f06(0x18e),'fromMe',_0x545f06(0x179),_0x545f06(0x183),'remoteJid',_0x545f06(0x193),_0x545f06(0x1a6),_0x545f06(0x196),_0x545f06(0x19c),_0x545f06(0x186),'agents',_0x545f06(0x18c),_0x545f06(0x172),'8GECpHA',_0x545f06(0x176),_0x545f06(0x189),'2369339pApvgY',_0x545f06(0x1a9),_0x545f06(0x19a),_0x545f06(0x190),_0x545f06(0x188),'extendedTextMessage',_0x545f06(0x182),_0x545f06(0x18b),_0x545f06(0x1a2),_0x545f06(0x175),_0x545f06(0x16a),_0x545f06(0x17a),_0x545f06(0x181),_0x545f06(0x166),_0x545f06(0x1a8),_0x545f06(0x17e),_0x545f06(0x17b),'stringify',_0x545f06(0x1a4),'has',_0x545f06(0x16c),_0x545f06(0x18a),_0x545f06(0x19b),'4SAVmaE',_0x545f06(0x16b),'success',_0x545f06(0x184),_0x545f06(0x194),_0x545f06(0x1a5),'2334cUXIuM','chatbot',_0x545f06(0x168),'4750WWloLN',_0x545f06(0x191),_0x545f06(0x177),_0x545f06(0x170),_0x545f06(0x19f),_0x545f06(0x187),'4IOMtjJ',_0x545f06(0x19e),_0x545f06(0x171),_0x545f06(0x169),'conversation',_0x545f06(0x18f)];return a0_0x2bd6=function(){return _0x56fd05;},a0_0x2bd6();}function a0_0x1f0c(){const _0x414519=['Empty\x20message','add','user','trim','loading','⚠️\x20Chatbot\x20is\x20already\x20active\x20in\x20this\x20chat!','1027554hzAzSV','message','writeFile','updateConfig','553158gOLjNP','set','join','149789ccuMWp','3848256XsAteU','ag:4151fcb9:20250104:untitled-agent:d1bde2e5','path','text','2828241NTmbOB','messages.upsert','4323600LVBCvn','16cMClis','sendPresenceUpdate','delete','composing','Database','Chat\x20With\x20Mistral\x20AI\x20Bot','get','❌\x20Sorry,\x20I\x20encountered\x20an\x20error:\x20','14pBmDTo','has','Bot','agentId','Chatbot\x20error:','choices','error','off','content','key','Failed\x20to\x20get\x20AI\x20response:\x20','32110NePVGL','shift','Invalid\x20response\x20format\x20from\x20Mistral\x20AI','length','1178784sPqwKz','857754XupEdK','chatbot_config.json','@mistralai/mistralai','string','assistant','❌\x20Usage:\x20.chatbot\x20on/off','exports','Error\x20updating\x20config:','⚠️\x20Chatbot\x20is\x20already\x20inactive\x20in\x20this\x20chat!','✅\x20Chatbot\x20has\x20been\x20deactivated.','size','Failed\x20to\x20update\x20configuration','14339sSsxKD','✅\x20Mistral\x20AI\x20Chatbot\x20activated!\x20You\x20can\x20now\x20chat\x20with\x20me.','complete','utf8','push','Mistral\x20API\x20error:','33DGDQqe','promises','2762998Qjmrug','3231sfoGtl','paused','AA46jQW0VLsz2x7FW7sCUnBVIpBaa1qW','sendMessage','clear','startListening'];a0_0x1f0c=function(){return _0x414519;};return a0_0x1f0c();}