const a0_0x586d0e=a0_0x54fb;(function(_0x316985,_0x235ba6){const _0x4691f7=a0_0x54fb,_0x1b7016=_0x316985();while(!![]){try{const _0x5190bc=-parseInt(_0x4691f7(0x1ca))/0x1+-parseInt(_0x4691f7(0x1c7))/0x2+parseInt(_0x4691f7(0x1a7))/0x3*(parseInt(_0x4691f7(0x1bf))/0x4)+parseInt(_0x4691f7(0x1b4))/0x5+parseInt(_0x4691f7(0x1c1))/0x6*(-parseInt(_0x4691f7(0x199))/0x7)+-parseInt(_0x4691f7(0x19c))/0x8*(-parseInt(_0x4691f7(0x197))/0x9)+parseInt(_0x4691f7(0x1be))/0xa*(parseInt(_0x4691f7(0x1bb))/0xb);if(_0x5190bc===_0x235ba6)break;else _0x1b7016['push'](_0x1b7016['shift']());}catch(_0x22e152){_0x1b7016['push'](_0x1b7016['shift']());}}}(a0_0x28e5,0x9f557));const fs=require('fs')[a0_0x586d0e(0x1cb)],path=require(a0_0x586d0e(0x1ab)),{Mistral}=require('@mistralai/mistralai'),emojis={'loading':'⏳','success':'✨','error':'❌'},configPath=path[a0_0x586d0e(0x1bd)](__dirname,'..','..',a0_0x586d0e(0x193),a0_0x586d0e(0x1ae));let messageListener=null,activeChats=new Set(),chatHistory=new Map();const mistralClient=new Mistral({'apiKey':a0_0x586d0e(0x1b9)}),AGENT_CONFIG={'agentId':a0_0x586d0e(0x1c3)};function sanitizeMessage(_0x45d3ea){if(typeof _0x45d3ea!=='string')return'';return _0x45d3ea['trim']();}async function getAIResponse(_0x48c914,_0x18c707){const _0x304a39=a0_0x586d0e,_0x4f3c9a=sanitizeMessage(_0x48c914);if(!_0x4f3c9a)throw new Error('Empty\x20message');try{!chatHistory[_0x304a39(0x1d0)](_0x18c707)&&chatHistory[_0x304a39(0x1a2)](_0x18c707,[]);const _0x419153=chatHistory[_0x304a39(0x196)](_0x18c707),_0x2eb666=_0x304a39(0x1b3),_0x4b5fd0=_0x2eb666+_0x304a39(0x1b1)+_0x4f3c9a+_0x304a39(0x198);_0x419153[_0x304a39(0x1a0)]({'role':'user','content':_0x4b5fd0});while(_0x419153['length']>0x19){_0x419153[_0x304a39(0x1a1)]();}const _0x44d133=await mistralClient[_0x304a39(0x1c4)]['complete']({'agentId':AGENT_CONFIG[_0x304a39(0x1a9)],'messages':_0x419153});if(!_0x44d133?.['choices']?.[0x0]?.[_0x304a39(0x1bc)]?.[_0x304a39(0x1b8)])throw new Error('Invalid\x20response\x20format\x20from\x20Mistral\x20AI');return _0x419153[_0x304a39(0x1a0)]({'role':_0x304a39(0x1a3),'content':_0x44d133[_0x304a39(0x1a4)][0x0][_0x304a39(0x1bc)][_0x304a39(0x1b8)]}),_0x44d133[_0x304a39(0x1a4)][0x0]['message'][_0x304a39(0x1b8)];}catch(_0x337307){console['error'](_0x304a39(0x19e),_0x337307),chatHistory[_0x304a39(0x19d)](_0x18c707);throw new Error(_0x304a39(0x1c9)+_0x337307[_0x304a39(0x1bc)]);}}function a0_0x28e5(){const _0xec6f74=['Failed\x20to\x20update\x20configuration','546280JyxlwO','updateConfig','Failed\x20to\x20get\x20AI\x20response:\x20','968216YBxQWf','promises','⚠️\x20Chatbot\x20is\x20already\x20active\x20in\x20this\x20chat!','composing','remoteJid','❌\x20Sorry,\x20I\x20encountered\x20an\x20error:\x20','has','messages.upsert','conversation','Database','g-chatbot','sendPresenceUpdate','get','207lHAnrW','\x0aAI:','17066SQskIM','Chatbot\x20error:','stringify','44248ynTnMi','delete','Mistral\x20API\x20error:','utf8','push','shift','set','assistant','choices','writeFile','add','111eEAUum','Error\x20updating\x20config:','agentId','off','path','error','startListening','genz_chatbot_config.json','key','extendedTextMessage','User:\x20','text','You\x27re\x20an\x20AI\x20that\x20only\x20speaks\x20in\x20Gen\x20Z\x20slang.\x20Make\x20sure\x20your\x20replies\x20are\x20funny,\x20sarcastic,\x20and\x20relatable,\x20but\x20still\x20serious\x20and\x20intelligent,\x20I\x20really\x20don\x27t\x20like\x20too\x20much\x20emojis.\x0a\x0a','455380fqczrl','clear','size','loading','content','AA46jQW0VLsz2x7FW7sCUnBVIpBaa1qW','✅\x20Chatbot\x20has\x20been\x20deactivated.','94897LjsFMQ','message','join','1610DJVvfu','77388ziowDa','success','1056rSotPq','✅\x20Kord\x20AI\x20Chatbot\x20activated!\x20You\x20can\x20now\x20chat\x20with\x20me.','ag:4151fcb9:20250104:untitled-agent:d1bde2e5','agents','sendMessage'];a0_0x28e5=function(){return _0xec6f74;};return a0_0x28e5();}function a0_0x54fb(_0x1c64c4,_0x924724){const _0x28e51f=a0_0x28e5();return a0_0x54fb=function(_0x54fb75,_0x4af605){_0x54fb75=_0x54fb75-0x191;let _0x430f42=_0x28e51f[_0x54fb75];return _0x430f42;},a0_0x54fb(_0x1c64c4,_0x924724);}module['exports']={'usage':[a0_0x586d0e(0x194)],'desc':'Chat\x20With\x20Mistral\x20AI\x20Bot','commandType':'Bot','isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'emoji':'✨',async 'execute'(_0x1d1b60,_0x3b8268,_0x113432){const _0x5712d0=a0_0x586d0e,_0x716db6=_0x3b8268['key'][_0x5712d0(0x1ce)],_0x316546=_0x2988e6=>{const _0x44a430=_0x5712d0;return _0x1d1b60[_0x44a430(0x1c5)](_0x716db6,{'text':_0x2988e6});};if(_0x113432[0x0]==='on'){if(activeChats['has'](_0x716db6))return _0x316546(_0x5712d0(0x1cc));return activeChats[_0x5712d0(0x1a6)](_0x716db6),chatHistory[_0x5712d0(0x1a2)](_0x716db6,[]),await this[_0x5712d0(0x1c8)](_0x716db6,!![]),!messageListener&&this[_0x5712d0(0x1ad)](_0x1d1b60),_0x316546(_0x5712d0(0x1c2));}else{if(_0x113432[0x0]===_0x5712d0(0x1aa)){if(!activeChats[_0x5712d0(0x1d0)](_0x716db6))return _0x316546('⚠️\x20Chatbot\x20is\x20already\x20inactive\x20in\x20this\x20chat!');return activeChats[_0x5712d0(0x19d)](_0x716db6),chatHistory[_0x5712d0(0x19d)](_0x716db6),await this[_0x5712d0(0x1c8)](_0x716db6,![]),activeChats[_0x5712d0(0x1b6)]===0x0&&messageListener&&(_0x1d1b60['ev'][_0x5712d0(0x1aa)](_0x5712d0(0x191),messageListener),messageListener=null),_0x316546(_0x5712d0(0x1ba));}else return _0x316546('❌\x20Usage:\x20.chatbot\x20on/off');}},async 'updateConfig'(_0x3f5a2a,_0x5d012b){const _0x4d93cc=a0_0x586d0e;try{let _0x5f07c0={};_0x5d012b&&(_0x5f07c0[_0x3f5a2a]=!![]),await fs[_0x4d93cc(0x1a5)](configPath,JSON[_0x4d93cc(0x19b)](_0x5f07c0,null,0x2));}catch(_0x41c097){console[_0x4d93cc(0x1ac)](_0x4d93cc(0x1a8),_0x41c097);throw new Error(_0x4d93cc(0x1c6));}},'startListening'(_0x3dec98){const _0x4a520e=a0_0x586d0e;messageListener=async({messages:_0x597827})=>{const _0x7517be=a0_0x54fb;for(const _0x367f92 of _0x597827){if(!_0x367f92?.[_0x7517be(0x1af)]?.[_0x7517be(0x1ce)]||!activeChats['has'](_0x367f92[_0x7517be(0x1af)][_0x7517be(0x1ce)]))continue;const _0x3ec03b=_0x367f92['key'][_0x7517be(0x1ce)],_0x4b8ad7=_0x367f92[_0x7517be(0x1bc)]?.[_0x7517be(0x192)]||_0x367f92[_0x7517be(0x1bc)]?.[_0x7517be(0x1b0)]?.[_0x7517be(0x1b2)]||'';if(!_0x4b8ad7||_0x367f92[_0x7517be(0x1af)]['fromMe'])continue;try{await _0x3dec98[_0x7517be(0x195)](_0x7517be(0x1cd),_0x3ec03b),await _0x3dec98[_0x7517be(0x1c5)](_0x3ec03b,{'react':{'key':_0x367f92[_0x7517be(0x1af)],'emoji':emojis[_0x7517be(0x1b7)]}});const _0xd0c106=await getAIResponse(_0x4b8ad7,_0x3ec03b);await _0x3dec98[_0x7517be(0x1c5)](_0x3ec03b,{'react':{'key':_0x367f92[_0x7517be(0x1af)],'emoji':emojis[_0x7517be(0x1c0)]}}),await _0x3dec98['sendMessage'](_0x3ec03b,{'text':_0xd0c106,'contextInfo':{'quotedMessage':_0x367f92[_0x7517be(0x1bc)]}});}catch(_0xb2d8bb){console[_0x7517be(0x1ac)](_0x7517be(0x19a),_0xb2d8bb),await _0x3dec98[_0x7517be(0x1c5)](_0x3ec03b,{'react':{'key':_0x367f92[_0x7517be(0x1af)],'emoji':emojis['error']}}),await _0x3dec98[_0x7517be(0x1c5)](_0x3ec03b,{'text':_0x7517be(0x1cf)+_0xb2d8bb[_0x7517be(0x1bc)]});}finally{await _0x3dec98['sendPresenceUpdate']('paused',_0x3ec03b);}}},_0x3dec98['ev']['on'](_0x4a520e(0x191),messageListener);},async 'init'(_0x2c6fdb){const _0x300c2b=a0_0x586d0e;try{await fs[_0x300c2b(0x1a5)](configPath,'{}',_0x300c2b(0x19f)),activeChats['clear'](),chatHistory[_0x300c2b(0x1b5)](),messageListener&&(_0x2c6fdb['ev']['off'](_0x300c2b(0x191),messageListener),messageListener=null);}catch(_0x3fe39f){console[_0x300c2b(0x1ac)]('Error\x20initializing\x20chatbot:',_0x3fe39f);}}};