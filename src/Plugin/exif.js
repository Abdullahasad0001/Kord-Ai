function a0_0x718d(){const _0x5bef37=['-vf','@ffmpeg-installer/ffmpeg','from','stringify','libwebp','-preset','.mp4','10210dYeTWl','utf-8','exports','setFfmpegPath','randomBytes','.webp','writeFileSync','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','save','7150024UUIrqt','end','-vcodec','exif','load','5752014zjnXDw','readFileSync','unlinkSync','toString','author','11TUEZtF','00:00:00','webp','toFormat','path','7nEGrRR','-loop','packname','Image','14aDCLNw','00:00:05','29596488XOpWGH','.jpg','readUIntLE','join','addOutputOptions','https://github.com/M3264','length','categories','concat','mimetype','error','350515SKxXDI','node-webpmux','default','7851drhbla','119323aCJsor','108aUhfkl','writeUIntLE','data','test','492qIwlqx','crypto'];a0_0x718d=function(){return _0x5bef37;};return a0_0x718d();}const a0_0x2d1479=a0_0x4abd;(function(_0x1d4024,_0x56e91e){const _0x3b0514=a0_0x4abd,_0x4b5a10=_0x1d4024();while(!![]){try{const _0x4d2a9f=parseInt(_0x3b0514(0xc9))/0x1*(parseInt(_0x3b0514(0xb8))/0x2)+parseInt(_0x3b0514(0xc8))/0x3*(parseInt(_0x3b0514(0xce))/0x4)+-parseInt(_0x3b0514(0xc5))/0x5+-parseInt(_0x3b0514(0xe5))/0x6*(-parseInt(_0x3b0514(0xb4))/0x7)+parseInt(_0x3b0514(0xe0))/0x8+parseInt(_0x3b0514(0xca))/0x9*(parseInt(_0x3b0514(0xd7))/0xa)+-parseInt(_0x3b0514(0xaf))/0xb*(parseInt(_0x3b0514(0xba))/0xc);if(_0x4d2a9f===_0x56e91e)break;else _0x4b5a10['push'](_0x4b5a10['shift']());}catch(_0x568597){_0x4b5a10['push'](_0x4b5a10['shift']());}}}(a0_0x718d,0x767e5));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(a0_0x2d1479(0xcf)),ff=require('fluent-ffmpeg'),ffmpegPath=require(a0_0x2d1479(0xd1))[a0_0x2d1479(0xb3)],webp=require(a0_0x2d1479(0xc6)),path=require(a0_0x2d1479(0xb3));function a0_0x4abd(_0x1d2fac,_0x2e43c4){const _0x718dfe=a0_0x718d();return a0_0x4abd=function(_0x4abdf1,_0x437f7d){_0x4abdf1=_0x4abdf1-0xac;let _0x4493f9=_0x718dfe[_0x4abdf1];return _0x4493f9;},a0_0x4abd(_0x1d2fac,_0x2e43c4);}ff[a0_0x2d1479(0xda)](ffmpegPath);async function imageToWebp(_0x313440){const _0x575a4a=a0_0x2d1479,_0x2bbba0=path['join'](tmpdir(),Crypto['randomBytes'](0x6)[_0x575a4a(0xbc)](0x0,0x6)[_0x575a4a(0xad)](0x24)+'.webp'),_0x57c5f7=path[_0x575a4a(0xbd)](tmpdir(),Crypto[_0x575a4a(0xdb)](0x6)[_0x575a4a(0xbc)](0x0,0x6)[_0x575a4a(0xad)](0x24)+_0x575a4a(0xbb));fs[_0x575a4a(0xdd)](_0x57c5f7,_0x313440),await new Promise((_0x121259,_0x1dfd26)=>{const _0xcee3d8=_0x575a4a;ff(_0x57c5f7)['on'](_0xcee3d8(0xc4),_0x1dfd26)['on'](_0xcee3d8(0xe1),()=>_0x121259(!![]))['addOutputOptions']([_0xcee3d8(0xe2),'libwebp',_0xcee3d8(0xd0),_0xcee3d8(0xde)])[_0xcee3d8(0xb2)](_0xcee3d8(0xb1))['save'](_0x2bbba0);});const _0xf52626=fs['readFileSync'](_0x2bbba0);return fs[_0x575a4a(0xac)](_0x2bbba0),fs[_0x575a4a(0xac)](_0x57c5f7),_0xf52626;}async function videoToWebp(_0x579ba2){const _0x5220a5=a0_0x2d1479,_0x19de70=path[_0x5220a5(0xbd)](tmpdir(),Crypto[_0x5220a5(0xdb)](0x6)[_0x5220a5(0xbc)](0x0,0x6)[_0x5220a5(0xad)](0x24)+'.webp'),_0x7b410c=path[_0x5220a5(0xbd)](tmpdir(),Crypto[_0x5220a5(0xdb)](0x6)[_0x5220a5(0xbc)](0x0,0x6)[_0x5220a5(0xad)](0x24)+_0x5220a5(0xd6));fs[_0x5220a5(0xdd)](_0x7b410c,_0x579ba2),await new Promise((_0x3eeb95,_0xeaecb2)=>{const _0x30383=_0x5220a5;ff(_0x7b410c)['on']('error',_0xeaecb2)['on']('end',()=>_0x3eeb95(!![]))[_0x30383(0xbe)](['-vcodec',_0x30383(0xd4),_0x30383(0xd0),_0x30383(0xde),_0x30383(0xb5),'0','-ss',_0x30383(0xb0),'-t',_0x30383(0xb9),_0x30383(0xd5),_0x30383(0xc7),'-an','-vsync','0'])[_0x30383(0xb2)](_0x30383(0xb1))[_0x30383(0xdf)](_0x19de70);});const _0x1e1c77=fs[_0x5220a5(0xe6)](_0x19de70);return fs['unlinkSync'](_0x19de70),fs[_0x5220a5(0xac)](_0x7b410c),_0x1e1c77;}async function writeExifImg(_0x5ab143,_0x190143){const _0x49a4dc=a0_0x2d1479;let _0x5c14c1=await imageToWebp(_0x5ab143);const _0x10d479=path[_0x49a4dc(0xbd)](tmpdir(),Crypto[_0x49a4dc(0xdb)](0x6)[_0x49a4dc(0xbc)](0x0,0x6)['toString'](0x24)+_0x49a4dc(0xdc)),_0x93f9f3=path[_0x49a4dc(0xbd)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x49a4dc(0xad)](0x24)+_0x49a4dc(0xdc));fs[_0x49a4dc(0xdd)](_0x10d479,_0x5c14c1);if(_0x190143[_0x49a4dc(0xb6)]||_0x190143[_0x49a4dc(0xae)]){const _0x148b56=new webp[(_0x49a4dc(0xb7))](),_0x3536c4={'sticker-pack-id':_0x49a4dc(0xbf),'sticker-pack-name':_0x190143[_0x49a4dc(0xb6)],'sticker-pack-publisher':_0x190143['author'],'emojis':_0x190143[_0x49a4dc(0xc1)]?_0x190143[_0x49a4dc(0xc1)]:['']},_0x9893a0=Buffer[_0x49a4dc(0xd2)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x5e3fe6=Buffer[_0x49a4dc(0xd2)](JSON[_0x49a4dc(0xd3)](_0x3536c4),_0x49a4dc(0xd8)),_0x537588=Buffer['concat']([_0x9893a0,_0x5e3fe6]);return _0x537588[_0x49a4dc(0xcb)](_0x5e3fe6[_0x49a4dc(0xc0)],0xe,0x4),await _0x148b56[_0x49a4dc(0xe4)](_0x10d479),fs['unlinkSync'](_0x10d479),_0x148b56[_0x49a4dc(0xe3)]=_0x537588,await _0x148b56['save'](_0x93f9f3),_0x93f9f3;}}async function writeExifVid(_0x35065c,_0x41e5a5){const _0x3ef643=a0_0x2d1479;let _0x24dc59=await videoToWebp(_0x35065c);const _0x9ac5f8=path['join'](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x3ef643(0xad)](0x24)+_0x3ef643(0xdc)),_0x6e562a=path[_0x3ef643(0xbd)](tmpdir(),Crypto[_0x3ef643(0xdb)](0x6)[_0x3ef643(0xbc)](0x0,0x6)[_0x3ef643(0xad)](0x24)+_0x3ef643(0xdc));fs['writeFileSync'](_0x9ac5f8,_0x24dc59);if(_0x41e5a5[_0x3ef643(0xb6)]||_0x41e5a5[_0x3ef643(0xae)]){const _0x2598db=new webp['Image'](),_0xdf7436={'sticker-pack-id':_0x3ef643(0xbf),'sticker-pack-name':_0x41e5a5[_0x3ef643(0xb6)],'sticker-pack-publisher':_0x41e5a5[_0x3ef643(0xae)],'emojis':_0x41e5a5[_0x3ef643(0xc1)]?_0x41e5a5[_0x3ef643(0xc1)]:['']},_0xa78400=Buffer[_0x3ef643(0xd2)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4fe8ce=Buffer[_0x3ef643(0xd2)](JSON[_0x3ef643(0xd3)](_0xdf7436),_0x3ef643(0xd8)),_0x9859a5=Buffer[_0x3ef643(0xc2)]([_0xa78400,_0x4fe8ce]);return _0x9859a5['writeUIntLE'](_0x4fe8ce[_0x3ef643(0xc0)],0xe,0x4),await _0x2598db['load'](_0x9ac5f8),fs['unlinkSync'](_0x9ac5f8),_0x2598db[_0x3ef643(0xe3)]=_0x9859a5,await _0x2598db['save'](_0x6e562a),_0x6e562a;}}async function writeExif(_0xfb695,_0x1acbd5){const _0xfedaa8=a0_0x2d1479;let _0x2e0f69=/webp/[_0xfedaa8(0xcd)](_0xfb695[_0xfedaa8(0xc3)])?_0xfb695[_0xfedaa8(0xcc)]:/image/[_0xfedaa8(0xcd)](_0xfb695[_0xfedaa8(0xc3)])?await imageToWebp(_0xfb695[_0xfedaa8(0xcc)]):/video/[_0xfedaa8(0xcd)](_0xfb695[_0xfedaa8(0xc3)])?await videoToWebp(_0xfb695[_0xfedaa8(0xcc)]):'';const _0x237ce8=path[_0xfedaa8(0xbd)](tmpdir(),Crypto['randomBytes'](0x6)[_0xfedaa8(0xbc)](0x0,0x6)[_0xfedaa8(0xad)](0x24)+_0xfedaa8(0xdc)),_0x288435=path[_0xfedaa8(0xbd)](tmpdir(),Crypto['randomBytes'](0x6)[_0xfedaa8(0xbc)](0x0,0x6)[_0xfedaa8(0xad)](0x24)+'.webp');fs['writeFileSync'](_0x237ce8,_0x2e0f69);if(_0x1acbd5[_0xfedaa8(0xb6)]||_0x1acbd5['author']){const _0x3cb1bd=new webp[(_0xfedaa8(0xb7))](),_0x310856={'sticker-pack-id':_0xfedaa8(0xbf),'sticker-pack-name':_0x1acbd5[_0xfedaa8(0xb6)],'sticker-pack-publisher':_0x1acbd5[_0xfedaa8(0xae)],'emojis':_0x1acbd5['categories']?_0x1acbd5['categories']:['']},_0x22b44d=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3dc006=Buffer[_0xfedaa8(0xd2)](JSON[_0xfedaa8(0xd3)](_0x310856),_0xfedaa8(0xd8)),_0x12a2a7=Buffer[_0xfedaa8(0xc2)]([_0x22b44d,_0x3dc006]);return _0x12a2a7['writeUIntLE'](_0x3dc006[_0xfedaa8(0xc0)],0xe,0x4),await _0x3cb1bd['load'](_0x237ce8),fs['unlinkSync'](_0x237ce8),_0x3cb1bd[_0xfedaa8(0xe3)]=_0x12a2a7,await _0x3cb1bd[_0xfedaa8(0xdf)](_0x288435),_0x288435;}}const {Image}=require('node-webpmux'),{format}=require('util');async function addExif(_0x1b2856,_0x56197d,_0x465545,_0x3dfb67=[''],_0x1df208={}){const _0x2cccbc=a0_0x2d1479,_0x2f2fd3=new Image(),_0x2c3bb2={'sticker-pack-id':'M3264','sticker-pack-name':_0x56197d,'sticker-pack-publisher':_0x465545,'emojis':_0x3dfb67,'is-avatar-sticker':0x1,..._0x1df208};let _0x9f42b2=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3e6e0e=Buffer[_0x2cccbc(0xd2)](JSON[_0x2cccbc(0xd3)](_0x2c3bb2),'utf8'),_0x4f5c0d=Buffer[_0x2cccbc(0xc2)]([_0x9f42b2,_0x3e6e0e]);return _0x4f5c0d[_0x2cccbc(0xcb)](_0x3e6e0e[_0x2cccbc(0xc0)],0xe,0x4),await _0x2f2fd3[_0x2cccbc(0xe4)](_0x1b2856),_0x2f2fd3['exif']=_0x4f5c0d,await _0x2f2fd3[_0x2cccbc(0xdf)](null);}module[a0_0x2d1479(0xd9)]={'addExif':addExif,'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};